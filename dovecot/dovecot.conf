# Protocols and mail location
protocols = imap lmtp
mail_location = maildir:/mail/%d/%n/Maildir

# TLS
ssl = required
ssl_cert = </etc/ssl/private/cert.pem
ssl_key = </etc/ssl/private/key.pem

# Auth database
passdb {
  driver = passwd-file
  args = scheme=SHA512-CRYPT /etc/dovecot/passwd
}
userdb {
  driver = static
  args = uid=dovecot gid=dovecot home=/mail/%d/%n
}

# SASL for Postfix over TCP
 service auth {
   inet_listener {
     address = 0.0.0.0
     port = 12345
   }
 }

# LMTP over TCP for Postfix delivery
service lmtp {
  inet_listener lmtp {
    address = 0.0.0.0
    port = 24
  }
}

# IMAP listeners
service imap-login {
  inet_listener imap {
    port = 143
  }
  inet_listener imaps {
    port = 993
    ssl = yes
  }
}

# Logging
log_path = /dev/stdout
auth_verbose = yes
auth_mechanisms = plain login