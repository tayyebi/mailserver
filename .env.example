# -------------------------------
# Mailserver Configuration
# -------------------------------

# Primary mail domain (used for Postfix mydomain)
MAIL_DOMAIN=gordarg.com

# FQDN of the mail server (should match DNS A, MX, PTR)
MAIL_HOST=mail.gordarg.com

# Timezone (e.g. UTC, Europe/Berlin, Asia/Tehran)
TZ=Asia/Tehran

# -------------------------------
# Network Configuration
# -------------------------------
# Internal Docker network IPs (172.18.0.0/16)
DOVECOT_IP=172.18.0.5
OPENDKIM_IP=172.18.0.6
POSTFIX_IP=172.18.0.7
PIXEL_MILTER_IP=172.18.0.20
PIXEL_SERVER_IP=172.18.0.21
ADMIN_IP=172.18.0.31
PROXY_IP=172.18.0.40

# -------------------------------
# Port Configuration (Standardized)
# -------------------------------

# External Ports (exposed to host)
# HTTP/HTTPS (external host ports)
# Default to 8080/8443 but can be overridden as needed
HTTP_PORT=8080
HTTPS_PORT=8443

# SMTP Ports
SMTP_PORT=25
SUBMISSION_PORT=587
SMTPS_PORT=465

# IMAP Ports
IMAP_PORT=143
IMAPS_PORT=993

# POP3 Ports
POP3_PORT=110
POP3S_PORT=995

# Internal Ports (Docker network only)
# OpenDKIM
OPENDKIM_PORT=8891

# PixelMilter
PIXEL_MILTER_PORT=8892

# PixelServer
PIXEL_SERVER_REPORTS_PORT=8444
PIXEL_SERVER_HTTPS_PORT=8448

# Dovecot Internal
DOVECOT_LMTP_PORT=24
DOVECOT_AUTH_PORT=12345

# Admin Panel Internal
ADMIN_INTERNAL_PORT=80

# -------------------------------
# Admin Panel Configuration
# -------------------------------
# Generate with: php artisan key:generate --show
# Or: base64:$(openssl rand -base64 32)
APP_KEY=base64:CHANGEME_GENERATE_NEW_KEY_WITH_ARTISAN

# Laravel admin app settings
APP_NAME="Mail Server Admin"
APP_ENV=production
APP_DEBUG=false

# Laravel admin cache store (container env)
CACHE_STORE=file

# HTTP Basic Auth for /admin (nginx-proxy)
# These are consumed by the nginx-proxy container to protect the admin panel.
ADMIN_BASIC_AUTH_USER=admin
ADMIN_BASIC_AUTH_PASSWORD=change_me_strong_password

# -------------------------------
# Pixel Tracking Configuration
# -------------------------------
# IMPORTANT: Include the PixelServer HTTPS port in the URL for internal communication
PIXEL_BASE_URL=https://${MAIL_HOST}:${PIXEL_SERVER_HTTPS_PORT}/pixel?id=
TRACKING_REQUIRES_OPT_IN=false
OPT_IN_HEADER=X-Track-Open
DISCLOSURE_HEADER=X-Tracking-Notice
INJECT_DISCLOSURE=true
PIXEL_MILTER_SOCKET=/var/run/pixelmilter/pixel.sock
PIXEL_MILTER_ADDRESS=0.0.0.0:${PIXEL_MILTER_PORT}
REPORTS_PORT=${PIXEL_SERVER_REPORTS_PORT}
REPORTS_BIND_ADDRESS=0.0.0.0:${PIXEL_SERVER_REPORTS_PORT}

# -------------------------------
# Notes
# -------------------------------
# - Add mailbox accounts through the admin panel at /admin
# - Add domains and generate DKIM keys through the admin panel
# - Replace self-signed cert in data/ssl with a real cert when ready